<html>
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="../html/css/style.css">
        
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src="../html/js/helper.js"></script>
    </head>
    <body>
        <div class="container">
            <div id="docsNavigatrior" style="display: none;">
                <a href="../html/pages/FAQPages/Python/index.html">Back</a>
            </div>
            <div class="row">
                <div class="col-12">
                    <h3>Multiprocessing with Python</h3>
                </div>
            </div>
            <div class="row">
                    <div class="col-12">
                        <div class='divider'></div>
                        <h4>Multiprocessing Module</h4>
                        
                        <pre>
                        
                        <code>from multiprocessing import Manager, Pool</code>
                        
                        <code></code>
                        
                        <code>MAX_NUM_PROCESSES = <MAXPROCESSES></code>
                        
                        <code>shared_list = manager.list()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   # Required to share information between processes as they are independent</code>
                        
                        <code></code>
                        
                        <code>with Pool(processes=MAX_NUM_PROCESSES) as pool:</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;print(pool.map(dps.get_ping_results, shared_list[0]['info']))</code>
                        
                        </pre>
                        
                        <div class='divider'></div>
                        <h4>Using Manager and Process</h4>
                        <pre>
                        
                        <code>from multiprocessing import Manager, Process</code>
                        
                        <code></code>
                        
                        <code># Information isn't shared accross processes. Create a list using Manager</code>
                        
                        <code># from multiprocessing import Manager, Process</code>
                        
                        <code></code>
                        
                        <code>  with Manager() as manager:</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;L = manager.list()</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;for device in device_info['info']:</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;  L.append([device['ip'], device['hostname'], device['username'], device['password']])</code>
                        
                        <code></code>
                        
                        <code># Create multiple processes and make sure to append them to close them later:</code>
                        
                        <code>  for i in range(len(L)):</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;print("i:{}".format(i))</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;p = Process(target=get_status_info, args=(L[i],))</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;p.start()</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;processes.append(p)</code>
                        
                        <code></code>
                        
                        <code># Close processes:</code>
                        
                        <code>  for p in processes:</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;p.join()</code>
                        
                        </pre>
                        
                        <div class='divider'></div>
                        <h4>Using Manager and Pool</h4>
                        <pre>
                        <code>from multiprocessing import Manager, Pool</code>
                        
                        <code></code>
                        
                        <code>MAX_PROCESSES = 10</code>
                        
                        <code>manager = Manager()</code>
                        
                        <code>shared_list = manager.list()</code>
                        
                        <code></code>
                        
                        <code>for line in noblank_lines(fh):</code>
                        
                        <code>&nbsp;&nbsp;&nbsp;&nbsp;shared_list.append(line)</code>
                        
                        <code></code>
                        
                        <code>pool = Pool(processes=MAX_PROCESSES)</code>
                        
                        <code>pool.map(multiPro_test_msgs, shared_list)</code>
                        
                    </div>
            </div>
        </div>
    </body>